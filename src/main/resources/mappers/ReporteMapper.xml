<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="edu.eci.cvds.persistence.mybatisimpl.mappers.ReporteMapper">
    <resultMap type='Reserva' id='ReservaResult'>
        <id property='id' column='id' />
        <result property='titulo' column='titulo' />
        <result property='dataInicio' column='inicio' />
        <result property='dataFim' column='fin' />
        <result property='diaInteiro' column='diaEntero' />
        <result property='tipoReserva' column='tipoReserva' />
        <result property='usuario' column='usuario' />
        <result property='recurso' column='recurso' />
    </resultMap>
    
    <select id="recursosMasUsados" resultMap="ReservaResult">
        SELECT
        r.titulo,
        COUNT(r.titulo) AS cantidad_de_reservas
        FROM
        Reserva as r
        GROUP BY r.titulo
        ORDER BY cantidad_de_reservas desc
    </select>
       
</mapper>